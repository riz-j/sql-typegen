#!/usr/bin/env node
var __create=Object.create,__defProp=Object.defineProperty,__getProtoOf=Object.getPrototypeOf,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__toESM=(e,t,r)=>{r=null!=e?__create(__getProtoOf(e)):{};let n=!t&&e&&e.__esModule?r:__defProp(r,"default",{value:e,enumerable:!0});for(let i of __getOwnPropNames(e))__hasOwnProp.call(n,i)||__defProp(n,i,{get:()=>e[i],enumerable:!0});return n},__commonJS=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),require_function=__commonJS(e=>{var t=function(e){return e},r=function(e){return function(){return e}},n=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.length>1?e(t[1],t[0]):function(r){return e(r)(t[0])}}},i=function(e,t,r,n,i,a,o,u,s){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return r(t(e.apply(this,arguments)))};case 4:return function(){return n(r(t(e.apply(this,arguments))))};case 5:return function(){return i(n(r(t(e.apply(this,arguments)))))};case 6:return function(){return a(i(n(r(t(e.apply(this,arguments))))))};case 7:return function(){return o(a(i(n(r(t(e.apply(this,arguments)))))))};case 8:return function(){return u(o(a(i(n(r(t(e.apply(this,arguments))))))))};case 9:return function(){return s(u(o(a(i(n(r(t(e.apply(this,arguments)))))))))}}},a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},o=function(e){return e+1},u=function(e){return e-1},s=function(e){throw Error("Called `absurd` function which should be uncallable")},l=function(e){return function(t){return e.apply(void 0,t)}},c=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e(t)}},f=function(e,t,r,n,i,a,o,u,s){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return i(n(r(t(e))));case 6:return a(i(n(r(t(e)))));case 7:return o(a(i(n(r(t(e))))));case 8:return u(o(a(i(n(r(t(e)))))));case 9:return s(u(o(a(i(n(r(t(e))))))));default:for(var l=arguments[0],c=1;c<arguments.length;c++)l=arguments[c](l);return l}},p=function(e){return function(t){return!e(t)}},d=e&&e.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.dual=e.getEndomorphismMonoid=e.not=e.SK=e.hole=e.pipe=e.untupled=e.tupled=e.absurd=e.decrement=e.increment=e.tuple=e.flow=e.flip=e.constVoid=e.constUndefined=e.constNull=e.constFalse=e.constTrue=e.constant=e.unsafeCoerce=e.identity=e.apply=e.getRing=e.getSemiring=e.getMonoid=e.getSemigroup=e.getBooleanAlgebra=void 0;var m=function(e){return function(){return{meet:function(t,r){return function(n){return e.meet(t(n),r(n))}},join:function(t,r){return function(n){return e.join(t(n),r(n))}},zero:function(){return e.zero},one:function(){return e.one},implies:function(t,r){return function(n){return e.implies(t(n),r(n))}},not:function(t){return function(r){return e.not(t(r))}}}}};e.getBooleanAlgebra=m;var h=function(e){return function(){return{concat:function(t,r){return function(n){return e.concat(t(n),r(n))}}}}};e.getSemigroup=h;var g=function(t){var r=(0,e.getSemigroup)(t);return function(){return{concat:r().concat,empty:function(){return t.empty}}}};e.getMonoid=g;var $=function(e){return{add:function(t,r){return function(n){return e.add(t(n),r(n))}},zero:function(){return e.zero},mul:function(t,r){return function(n){return e.mul(t(n),r(n))}},one:function(){return e.one}}};e.getSemiring=$;var y=function(t){var r=(0,e.getSemiring)(t);return{add:r.add,mul:r.mul,one:r.one,zero:r.zero,sub:function(e,r){return function(n){return t.sub(e(n),r(n))}}}};e.getRing=y;var v=function(e){return function(t){return t(e)}};e.apply=v,e.identity=t,e.unsafeCoerce=t,e.constant=r,e.constTrue=r(!0),e.constFalse=r(!1),e.constNull=r(null),e.constUndefined=r(void 0),e.constVoid=e.constUndefined,e.flip=n,e.flow=i,e.tuple=a,e.increment=o,e.decrement=u,e.absurd=s,e.tupled=l,e.untupled=c,e.pipe=f,e.hole=s;var w=function(e,t){return t};e.SK=w,e.not=p;var _=function(){return{concat:function(e,t){return i(e,t)},empty:t}};e.getEndomorphismMonoid=_;var S=function(e,t){var r="number"==typeof e?function(t){return t.length>=e}:e;return function(){var e=Array.from(arguments);return r(arguments)?t.apply(this,e):function(r){return t.apply(void 0,d([r],e,!1))}}};e.dual=S}),require_internal=__commonJS(e=>{var t=e&&e.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.flatMapReader=e.flatMapTask=e.flatMapIO=e.flatMapEither=e.flatMapOption=e.flatMapNullable=e.liftOption=e.liftNullable=e.fromReadonlyNonEmptyArray=e.has=e.emptyRecord=e.emptyReadonlyArray=e.tail=e.head=e.isNonEmpty=e.singleton=e.right=e.left=e.isRight=e.isLeft=e.some=e.none=e.isSome=e.isNone=void 0;var r=require_function(),n=function(e){return"None"===e._tag};e.isNone=n;var i=function(e){return"Some"===e._tag};e.isSome=i,e.none={_tag:"None"};var a=function(e){return{_tag:"Some",value:e}};e.some=a;var o=function(e){return"Left"===e._tag};e.isLeft=o;var u=function(e){return"Right"===e._tag};e.isRight=u;var s=function(e){return{_tag:"Left",left:e}};e.left=s;var l=function(e){return{_tag:"Right",right:e}};e.right=l;var c=function(e){return[e]};e.singleton=c;var f=function(e){return e.length>0};e.isNonEmpty=f;var p=function(e){return e[0]};e.head=p;var d=function(e){return e.slice(1)};e.tail=d,e.emptyReadonlyArray=[],e.emptyRecord={},e.has=Object.prototype.hasOwnProperty;var m=function(e){return t([e[0]],e.slice(1),!0)};e.fromReadonlyNonEmptyArray=m;var h=function(t){return function(r,n){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=r.apply(void 0,i);return t.fromEither(null==o?(0,e.left)(n.apply(void 0,i)):(0,e.right)(o))}}};e.liftNullable=h;var g=function(t){return function(r,n){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=r.apply(void 0,i);return t.fromEither((0,e.isNone)(o)?(0,e.left)(n.apply(void 0,i)):(0,e.right)(o.value))}}};e.liftOption=g;var $=function(t,n){return(0,r.dual)(3,function(r,i,a){return n.flatMap(r,(0,e.liftNullable)(t)(i,a))})};e.flatMapNullable=$;var y=function(t,n){return(0,r.dual)(3,function(r,i,a){return n.flatMap(r,(0,e.liftOption)(t)(i,a))})};e.flatMapOption=y;var v=function(e,t){return(0,r.dual)(2,function(r,n){return t.flatMap(r,function(t){return e.fromEither(n(t))})})};e.flatMapEither=v;var w=function(e,t){return(0,r.dual)(2,function(r,n){return t.flatMap(r,function(t){return e.fromIO(n(t))})})};e.flatMapIO=w;var _=function(e,t){return(0,r.dual)(2,function(r,n){return t.flatMap(r,function(t){return e.fromTask(n(t))})})};e.flatMapTask=_;var S=function(e,t){return(0,r.dual)(2,function(r,n){return t.flatMap(r,function(t){return e.fromReader(n(t))})})};e.flatMapReader=S}),require_Apply=__commonJS(e=>{var t=function(e,t){return function(r){return function(n){return e.ap(e.map(n,function(e){return function(r){return t.ap(e,r)}}),r)}}},r=function(e){return function(t){return function(r){return e.ap(e.map(r,function(e){return function(){return e}}),t)}}},n=function(e){return function(t){return function(r){return e.ap(e.map(r,function(){return function(e){return e}}),t)}}},i=function(e){return function(t,r){return function(n){return e.ap(e.map(n,function(e){return function(r){var n;return Object.assign({},e,((n={})[t]=r,n))}}),r)}}},a=function(e){return function(t){return{concat:function(r,n){return e.ap(e.map(r,function(e){return function(r){return t.concat(e,r)}}),n)}}}},o=function(e,t,r){return function(n){for(var i=Array(r.length+1),a=0;a<r.length;a++)i[a]=r[a];return i[r.length]=n,0===t?e.apply(null,i):o(e,t-1,i)}},u=function(e){return h.has.call(g,e)||(g[e]=o(m.tuple,e-1,[])),g[e]},s=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=t.length,i=u(n),a=e.map(t[0],i),o=1;o<n;o++)a=e.ap(a,t[o]);return a}},l=function(e){var t=e.length;switch(t){case 1:return function(t){var r;return(r={})[e[0]]=t,r};case 2:return function(t){return function(r){var n;return(n={})[e[0]]=t,n[e[1]]=r,n}};case 3:return function(t){return function(r){return function(n){var i;return(i={})[e[0]]=t,i[e[1]]=r,i[e[2]]=n,i}}};case 4:return function(t){return function(r){return function(n){return function(i){var a;return(a={})[e[0]]=t,a[e[1]]=r,a[e[2]]=n,a[e[3]]=i,a}}}};case 5:return function(t){return function(r){return function(n){return function(i){return function(a){var o;return(o={})[e[0]]=t,o[e[1]]=r,o[e[2]]=n,o[e[3]]=i,o[e[4]]=a,o}}}}};default:return o(function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var i={},a=0;a<t;a++)i[e[a]]=r[a];return i},t-1,[])}},c=function(e){return function(t){for(var r=Object.keys(t),n=r.length,i=l(r),a=e.map(t[r[0]],i),o=1;o<n;o++)a=e.ap(a,t[r[o]]);return a}},f=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),p=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&f(t,e,r);return p(t,e),t};Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceS=e.sequenceT=e.getApplySemigroup=e.apS=e.apSecond=e.apFirst=e.ap=void 0;var m=require_function(),h=d(require_internal());e.ap=t,e.apFirst=r,e.apSecond=n,e.apS=i,e.getApplySemigroup=a;var g={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(r){return[e,t,r]}}},4:function(e){return function(t){return function(r){return function(n){return[e,t,r,n]}}}},5:function(e){return function(t){return function(r){return function(n){return function(i){return[e,t,r,n,i]}}}}}};e.sequenceT=s,e.sequenceS=c}),require_Functor=__commonJS(e=>{var t=function(e,t){return function(r){return function(n){return e.map(n,function(e){return t.map(e,r)})}}},r=function(e){return function(t){return function(r){return e.map(r,function(e){return e(t)})}}},n=function(e){return function(t){return function(r){return e.map(r,function(e){var r;return(r={})[t]=e,r})}}},i=function(e){return function(t,r){return function(n){return e.map(n,function(e){var n;return Object.assign({},e,((n={})[t]=r(e),n))})}}},a=function(e,r){var n=t(e,r);return{map:function(e,t){return(0,s.pipe)(e,n(t))}}},o=function(e){return function(t,r){return e.map(t,function(){return r})}},u=function(e){var t=o(e);return function(e){return t(e,void 0)}};Object.defineProperty(e,"__esModule",{value:!0}),e.asUnit=e.as=e.getFunctorComposition=e.let=e.bindTo=e.flap=e.map=void 0;var s=require_function();e.map=t,e.flap=r,e.bindTo=n,e.let=i,e.getFunctorComposition=a,e.as=o,e.asUnit=u}),require_Applicative=__commonJS(e=>{var t=function(e){var t=(0,n.getApplySemigroup)(e);return function(r){return{concat:t(r).concat,empty:e.of(r.empty)}}},r=function(e,t){var r=(0,a.getFunctorComposition)(e,t).map,o=(0,n.ap)(e,t);return{map:r,of:function(r){return e.of(t.of(r))},ap:function(e,t){return(0,i.pipe)(e,o(t))}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getApplicativeComposition=e.getApplicativeMonoid=void 0;var n=require_Apply(),i=require_function(),a=require_Functor();e.getApplicativeMonoid=t,e.getApplicativeComposition=r}),require_Chain=__commonJS(e=>{var t=function(e){var t=r(e);return function(e){return function(r){return t(r,e)}}},r=function(e){return function(t,r){return e.chain(t,function(t){return e.map(r(t),function(){return t})})}},n=function(e){return function(t,r){return function(n){return e.chain(n,function(n){return e.map(r(n),function(e){var r;return Object.assign({},n,((r={})[t]=e,r))})})}}};Object.defineProperty(e,"__esModule",{value:!0}),e.bind=e.tap=e.chainFirst=void 0,e.chainFirst=t,e.tap=r,e.bind=n}),require_ChainRec=__commonJS(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tailRec=void 0;var t=function(e,t){for(var r=t(e);"Left"===r._tag;)r=t(r.left);return r.right};e.tailRec=t}),require_FromEither=__commonJS(e=>{var t=function(e){return function(t){return function(r){return e.fromEither(h.isNone(r)?h.left(t()):h.right(r.value))}}},r=function(e){return function(t,r){return function(n){return e.fromEither(t(n)?h.right(n):h.left(r(n)))}}},n=function(e){var r=t(e);return function(e){var t=r(e);return function(e){return(0,m.flow)(e,t)}}},i=function(e,t){var r=n(e);return function(e){var n=r(e);return function(e){return function(r){return t.chain(r,n(e))}}}},a=function(e){return function(t){return(0,m.flow)(t,e.fromEither)}},o=function(e,t){var r=a(e);return function(e){return function(n){return t.chain(n,r(e))}}},u=function(e,t){var r=l(e,t);return function(e){return function(t){return r(t,e)}}},s=function(e,t){return function(r,n){return function(i){return t.chain(i,function(t){return e.fromEither(r(t)?h.right(t):h.left(n(t)))})}}},l=function(e,t){var r=a(e),n=(0,d.tap)(t);return function(e,t){return n(e,r(t))}},c=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),f=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),p=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&c(t,e,r);return f(t,e),t};Object.defineProperty(e,"__esModule",{value:!0}),e.tapEither=e.filterOrElse=e.chainFirstEitherK=e.chainEitherK=e.fromEitherK=e.chainOptionK=e.fromOptionK=e.fromPredicate=e.fromOption=void 0;var d=require_Chain(),m=require_function(),h=p(require_internal());e.fromOption=t,e.fromPredicate=r,e.fromOptionK=n,e.chainOptionK=i,e.fromEitherK=a,e.chainEitherK=o,e.chainFirstEitherK=u,e.filterOrElse=s,e.tapEither=l}),require_Separated=__commonJS(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.right=e.left=e.flap=e.Functor=e.Bifunctor=e.URI=e.bimap=e.mapLeft=e.map=e.separated=void 0;var t=require_function(),r=require_Functor(),n=function(e,t){return{left:e,right:t}};e.separated=n;var i=function(r,n){return(0,t.pipe)(r,(0,e.map)(n))},a=function(r,n){return(0,t.pipe)(r,(0,e.mapLeft)(n))},o=function(r,n,i){return(0,t.pipe)(r,(0,e.bimap)(n,i))},u=function(t){return function(r){return(0,e.separated)((0,e.left)(r),t((0,e.right)(r)))}};e.map=u;var s=function(t){return function(r){return(0,e.separated)(t((0,e.left)(r)),(0,e.right)(r))}};e.mapLeft=s;var l=function(t,r){return function(n){return(0,e.separated)(t((0,e.left)(n)),r((0,e.right)(n)))}};e.bimap=l,e.URI="Separated",e.Bifunctor={URI:e.URI,mapLeft:a,bimap:o},e.Functor={URI:e.URI,map:i},e.flap=(0,r.flap)(e.Functor);var c=function(e){return e.left};e.left=c;var f=function(e){return e.right};e.right=f}),require_Witherable=__commonJS(e=>{var t=function(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.separate)}}},r=function(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.compact)}}},n=function(e){return function(t){var r=e.wither(t);return function(e){return function(n){return r(n,function(r){return t.map(e(r),function(e){return e?u.some(r):u.none})})}}}},i=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return a(t,e),t};Object.defineProperty(e,"__esModule",{value:!0}),e.filterE=e.witherDefault=e.wiltDefault=void 0;var u=o(require_internal());e.wiltDefault=t,e.witherDefault=r,e.filterE=n}),require_Either=__commonJS(e=>{var t=function(e){return e instanceof Error?e:Error(String(e))},r=function(t){return function(n,i){if(void 0===i){var a=r(t);return function(e){return a(n,e)}}return!(0,e.isLeft)(i)&&t.equals(n,i.right)}},n=function(t,r){return(0,e.tryCatch)(function(){return JSON.parse(t)},r)},i=function(t){var r=(0,e.getApplicativeValidation)(t).ap,n=(0,e.getAltValidation)(t).alt;return{URI:e.URI,_E:void 0,map:y,of:e.of,chain:e.flatMap,bimap:A,mapLeft:O,reduce:w,foldMap:_,reduceRight:S,extend:U,traverse:R,sequence:e.sequence,chainRec:N,throwError:e.throwError,ap:r,alt:n}},a=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return o(t,e),t};Object.defineProperty(e,"__esModule",{value:!0}),e.match=e.foldW=e.matchW=e.isRight=e.isLeft=e.fromOption=e.fromPredicate=e.FromEither=e.MonadThrow=e.throwError=e.ChainRec=e.Extend=e.extend=e.Alt=e.alt=e.altW=e.Bifunctor=e.mapLeft=e.bimap=e.Traversable=e.sequence=e.traverse=e.Foldable=e.reduceRight=e.foldMap=e.reduce=e.Monad=e.Chain=e.Applicative=e.Apply=e.ap=e.apW=e.Pointed=e.of=e.asUnit=e.as=e.Functor=e.map=e.getAltValidation=e.getApplicativeValidation=e.getWitherable=e.getFilterable=e.getCompactable=e.getSemigroup=e.getEq=e.getShow=e.URI=e.flatMap=e.right=e.left=void 0,e.chainFirstW=e.chainFirst=e.chain=e.chainW=e.sequenceArray=e.traverseArray=e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex=e.traverseReadonlyNonEmptyArrayWithIndex=e.ApT=e.apSW=e.apS=e.bindW=e.bind=e.let=e.bindTo=e.Do=e.exists=e.elem=e.toError=e.toUnion=e.chainNullableK=e.fromNullableK=e.tryCatchK=e.tryCatch=e.fromNullable=e.orElse=e.orElseW=e.swap=e.filterOrElseW=e.filterOrElse=e.flatMapOption=e.flatMapNullable=e.liftOption=e.liftNullable=e.chainOptionKW=e.chainOptionK=e.fromOptionK=e.duplicate=e.flatten=e.flattenW=e.tap=e.apSecondW=e.apSecond=e.apFirstW=e.apFirst=e.flap=e.getOrElse=e.getOrElseW=e.fold=void 0,e.getValidation=e.getValidationMonoid=e.getValidationSemigroup=e.getApplyMonoid=e.getApplySemigroup=e.either=e.stringifyJSON=e.parseJSON=void 0;var s=require_Applicative(),l=require_Apply(),c=u(require_Chain()),f=require_ChainRec(),p=require_FromEither(),d=require_function(),m=require_Functor(),h=u(require_internal()),g=require_Separated(),$=require_Witherable();e.left=h.left,e.right=h.right,e.flatMap=(0,d.dual)(2,function(t,r){return(0,e.isLeft)(t)?t:r(t.right)});var y=function(t,r){return(0,d.pipe)(t,(0,e.map)(r))},v=function(t,r){return(0,d.pipe)(t,(0,e.ap)(r))},w=function(t,r,n){return(0,d.pipe)(t,(0,e.reduce)(r,n))},_=function(t){return function(r,n){var i=(0,e.foldMap)(t);return(0,d.pipe)(r,i(n))}},S=function(t,r,n){return(0,d.pipe)(t,(0,e.reduceRight)(r,n))},R=function(t){var r=(0,e.traverse)(t);return function(e,t){return(0,d.pipe)(e,r(t))}},A=function(t,r,n){return(0,d.pipe)(t,(0,e.bimap)(r,n))},O=function(t,r){return(0,d.pipe)(t,(0,e.mapLeft)(r))},I=function(t,r){return(0,d.pipe)(t,(0,e.alt)(r))},U=function(t,r){return(0,d.pipe)(t,(0,e.extend)(r))},N=function(t,r){return(0,f.tailRec)(r(t),function(t){return(0,e.isLeft)(t)?(0,e.right)((0,e.left)(t.left)):(0,e.isLeft)(t.right)?(0,e.left)(r(t.right.left)):(0,e.right)((0,e.right)(t.right.right))})};e.URI="Either";var P=function(t,r){return{show:function(n){return(0,e.isLeft)(n)?"left(".concat(t.show(n.left),")"):"right(".concat(r.show(n.right),")")}}};e.getShow=P;var M=function(t,r){return{equals:function(n,i){return n===i||((0,e.isLeft)(n)?(0,e.isLeft)(i)&&t.equals(n.left,i.left):(0,e.isRight)(i)&&r.equals(n.right,i.right))}}};e.getEq=M;var C=function(t){return{concat:function(r,n){return(0,e.isLeft)(n)?r:(0,e.isLeft)(r)?n:(0,e.right)(t.concat(r.right,n.right))}}};e.getSemigroup=C;var T=function(t){var r=(0,e.left)(t.empty);return{URI:e.URI,_E:void 0,compact:function(t){return(0,e.isLeft)(t)?t:"None"===t.right._tag?r:(0,e.right)(t.right.value)},separate:function(t){return(0,e.isLeft)(t)?(0,g.separated)(t,t):(0,e.isLeft)(t.right)?(0,g.separated)((0,e.right)(t.right.left),r):(0,g.separated)(r,(0,e.right)(t.right.right))}}};e.getCompactable=T;var L=function(t){var r=(0,e.left)(t.empty),n=(0,e.getCompactable)(t),i=n.compact,a=n.separate,o=function(t,n){return(0,e.isLeft)(t)?t:n(t.right)?t:r},u=function(t,n){return(0,e.isLeft)(t)?(0,g.separated)(t,t):n(t.right)?(0,g.separated)(r,(0,e.right)(t.right)):(0,g.separated)((0,e.right)(t.right),r)};return{URI:e.URI,_E:void 0,map:y,compact:i,separate:a,filter:o,filterMap:function(t,n){if((0,e.isLeft)(t))return t;var i=n(t.right);return"None"===i._tag?r:(0,e.right)(i.value)},partition:u,partitionMap:function(t,n){if((0,e.isLeft)(t))return(0,g.separated)(t,t);var i=n(t.right);return(0,e.isLeft)(i)?(0,g.separated)((0,e.right)(i.left),r):(0,g.separated)(r,(0,e.right)(i.right))}}};e.getFilterable=L;var q=function(t){var r=(0,e.getFilterable)(t),n=(0,e.getCompactable)(t);return{URI:e.URI,_E:void 0,map:y,compact:r.compact,separate:r.separate,filter:r.filter,filterMap:r.filterMap,partition:r.partition,partitionMap:r.partitionMap,traverse:R,sequence:e.sequence,reduce:w,foldMap:_,reduceRight:S,wither:(0,$.witherDefault)(e.Traversable,n),wilt:(0,$.wiltDefault)(e.Traversable,n)}};e.getWitherable=q;var x=function(t){return{URI:e.URI,_E:void 0,map:y,ap:function(r,n){return(0,e.isLeft)(r)?(0,e.isLeft)(n)?(0,e.left)(t.concat(r.left,n.left)):r:(0,e.isLeft)(n)?n:(0,e.right)(r.right(n.right))},of:e.of}};e.getApplicativeValidation=x;var F=function(t){return{URI:e.URI,_E:void 0,map:y,alt:function(r,n){if((0,e.isRight)(r))return r;var i=n();return(0,e.isLeft)(i)?(0,e.left)(t.concat(r.left,i.left)):i}}};e.getAltValidation=F;var k=function(t){return function(r){return(0,e.isLeft)(r)?r:(0,e.right)(t(r.right))}};e.map=k,e.Functor={URI:e.URI,map:y},e.as=(0,d.dual)(2,(0,m.as)(e.Functor)),e.asUnit=(0,m.asUnit)(e.Functor),e.of=e.right,e.Pointed={URI:e.URI,of:e.of};var B=function(t){return function(r){return(0,e.isLeft)(r)?r:(0,e.isLeft)(t)?t:(0,e.right)(r.right(t.right))}};e.apW=B,e.ap=e.apW,e.Apply={URI:e.URI,map:y,ap:v},e.Applicative={URI:e.URI,map:y,ap:v,of:e.of},e.Chain={URI:e.URI,map:y,ap:v,chain:e.flatMap},e.Monad={URI:e.URI,map:y,ap:v,of:e.of,chain:e.flatMap};var D=function(t,r){return function(n){return(0,e.isLeft)(n)?t:r(t,n.right)}};e.reduce=D;var W=function(t){return function(r){return function(n){return(0,e.isLeft)(n)?t.empty:r(n.right)}}};e.foldMap=W;var z=function(t,r){return function(n){return(0,e.isLeft)(n)?t:r(n.right,t)}};e.reduceRight=z,e.Foldable={URI:e.URI,reduce:w,foldMap:_,reduceRight:S};var K=function(t){return function(r){return function(n){return(0,e.isLeft)(n)?t.of((0,e.left)(n.left)):t.map(r(n.right),e.right)}}};e.traverse=K;var j=function(t){return function(r){return(0,e.isLeft)(r)?t.of((0,e.left)(r.left)):t.map(r.right,e.right)}};e.sequence=j,e.Traversable={URI:e.URI,map:y,reduce:w,foldMap:_,reduceRight:S,traverse:R,sequence:e.sequence};var V=function(t,r){return function(n){return(0,e.isLeft)(n)?(0,e.left)(t(n.left)):(0,e.right)(r(n.right))}};e.bimap=V;var G=function(t){return function(r){return(0,e.isLeft)(r)?(0,e.left)(t(r.left)):r}};e.mapLeft=G,e.Bifunctor={URI:e.URI,bimap:A,mapLeft:O};var J=function(t){return function(r){return(0,e.isLeft)(r)?t():r}};e.altW=J,e.alt=e.altW,e.Alt={URI:e.URI,map:y,alt:I};var Q=function(t){return function(r){return(0,e.isLeft)(r)?r:(0,e.right)(t(r))}};e.extend=Q,e.Extend={URI:e.URI,map:y,extend:U},e.ChainRec={URI:e.URI,map:y,ap:v,chain:e.flatMap,chainRec:N},e.throwError=e.left,e.MonadThrow={URI:e.URI,map:y,ap:v,of:e.of,chain:e.flatMap,throwError:e.throwError},e.FromEither={URI:e.URI,fromEither:d.identity},e.fromPredicate=(0,p.fromPredicate)(e.FromEither),e.fromOption=(0,p.fromOption)(e.FromEither),e.isLeft=h.isLeft,e.isRight=h.isRight;var H=function(t,r){return function(n){return(0,e.isLeft)(n)?t(n.left):r(n.right)}};e.matchW=H,e.foldW=e.matchW,e.match=e.matchW,e.fold=e.match;var Y=function(t){return function(r){return(0,e.isLeft)(r)?t(r.left):r.right}};e.getOrElseW=Y,e.getOrElse=e.getOrElseW,e.flap=(0,m.flap)(e.Functor),e.apFirst=(0,l.apFirst)(e.Apply),e.apFirstW=e.apFirst,e.apSecond=(0,l.apSecond)(e.Apply),e.apSecondW=e.apSecond,e.tap=(0,d.dual)(2,c.tap(e.Chain)),e.flattenW=(0,e.flatMap)(d.identity),e.flatten=e.flattenW,e.duplicate=(0,e.extend)(d.identity),e.fromOptionK=(0,p.fromOptionK)(e.FromEither),e.chainOptionK=(0,p.chainOptionK)(e.FromEither,e.Chain),e.chainOptionKW=e.chainOptionK;var X={fromEither:e.FromEither.fromEither};e.liftNullable=h.liftNullable(X),e.liftOption=h.liftOption(X);var Z={flatMap:e.flatMap};e.flatMapNullable=h.flatMapNullable(X,Z),e.flatMapOption=h.flatMapOption(X,Z),e.filterOrElse=(0,p.filterOrElse)(e.FromEither,e.Chain),e.filterOrElseW=e.filterOrElse;var ee=function(t){return(0,e.isLeft)(t)?(0,e.right)(t.left):(0,e.left)(t.right)};e.swap=ee;var et=function(t){return function(r){return(0,e.isLeft)(r)?t(r.left):r}};e.orElseW=et,e.orElse=e.orElseW;var er=function(t){return function(r){return null==r?(0,e.left)(t):(0,e.right)(r)}};e.fromNullable=er;var en=function(t,r){try{return(0,e.right)(t())}catch(n){return(0,e.left)(r(n))}};e.tryCatch=en;var ei=function(t,r){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return(0,e.tryCatch)(function(){return t.apply(void 0,n)},r)}};e.tryCatchK=ei;var ea=function(t){var r=(0,e.fromNullable)(t);return function(e){return(0,d.flow)(e,r)}};e.fromNullableK=ea;var eo=function(t){var r=(0,e.fromNullableK)(t);return function(t){return(0,e.flatMap)(r(t))}};e.chainNullableK=eo,e.toUnion=(0,e.foldW)(d.identity,d.identity),e.toError=t,e.elem=r;var eu=function(t){return function(r){return!(0,e.isLeft)(r)&&t(r.right)}};e.exists=eu,e.Do=(0,e.of)(h.emptyRecord),e.bindTo=(0,m.bindTo)(e.Functor);var es=(0,m.let)(e.Functor);e.let=es,e.bind=c.bind(e.Chain),e.bindW=e.bind,e.apS=(0,l.apS)(e.Apply),e.apSW=e.apS,e.ApT=(0,e.of)(h.emptyReadonlyArray);var el=function(t){return function(r){var n=t(0,h.head(r));if((0,e.isLeft)(n))return n;for(var i=[n.right],a=1;a<r.length;a++){var o=t(a,r[a]);if((0,e.isLeft)(o))return o;i.push(o.right)}return(0,e.right)(i)}};e.traverseReadonlyNonEmptyArrayWithIndex=el;var ec=function(t){var r=(0,e.traverseReadonlyNonEmptyArrayWithIndex)(t);return function(t){return h.isNonEmpty(t)?r(t):e.ApT}};e.traverseReadonlyArrayWithIndex=ec,e.traverseArrayWithIndex=e.traverseReadonlyArrayWithIndex;var ef=function(t){return(0,e.traverseReadonlyArrayWithIndex)(function(e,r){return t(r)})};e.traverseArray=ef,e.sequenceArray=(0,e.traverseArray)(d.identity),e.chainW=e.flatMap,e.chain=e.flatMap,e.chainFirst=e.tap,e.chainFirstW=e.tap,e.parseJSON=n;var ep=function(t,r){return(0,e.tryCatch)(function(){var e=JSON.stringify(t);if("string"!=typeof e)throw Error("Converting unsupported structure to JSON");return e},r)};e.stringifyJSON=ep,e.either={URI:e.URI,map:y,of:e.of,ap:v,chain:e.flatMap,reduce:w,foldMap:_,reduceRight:S,traverse:R,sequence:e.sequence,bimap:A,mapLeft:O,alt:I,extend:U,chainRec:N,throwError:e.throwError},e.getApplySemigroup=(0,l.getApplySemigroup)(e.Apply),e.getApplyMonoid=(0,s.getApplicativeMonoid)(e.Applicative);var ed=function(t,r){return(0,l.getApplySemigroup)((0,e.getApplicativeValidation)(t))(r)};e.getValidationSemigroup=ed;var em=function(t,r){return(0,s.getApplicativeMonoid)((0,e.getApplicativeValidation)(t))(r)};e.getValidationMonoid=em,e.getValidation=i});import e from"os";import t from"fs";var cachedError=function(e){if(originCache.has(e))return originCache.get(e);let t=Error.stackTraceLimit;return Error.stackTraceLimit=4,originCache.set(e,Error()),Error.stackTraceLimit=t,originCache.get(e)},originCache=new Map,originStackCache=new Map,originError=Symbol("OriginError"),CLOSE={};class Query extends Promise{constructor(e,t,r,n,i={}){let a,o;super((e,t)=>{a=e,o=t}),this.tagged=Array.isArray(e.raw),this.strings=e,this.args=t,this.handler=r,this.canceller=n,this.options=i,this.state=null,this.statement=null,this.resolve=e=>(this.active=!1,a(e)),this.reject=e=>(this.active=!1,o(e)),this.active=!1,this.cancelled=null,this.executed=!1,this.signature="",this[originError]=this.handler.debug?Error():this.tagged&&cachedError(this.strings)}get origin(){return(this.handler.debug?this[originError].stack:this.tagged&&originStackCache.has(this.strings)?originStackCache.get(this.strings):originStackCache.set(this.strings,this[originError].stack).get(this.strings))||""}static get[Symbol.species](){return Promise}cancel(){return this.canceller&&(this.canceller(this),this.canceller=null)}simple(){return this.options.simple=!0,this.options.prepare=!1,this}async readable(){return this.simple(),this.streaming=!0,this}async writable(){return this.simple(),this.streaming=!0,this}cursor(e=1,t){if(this.options.simple=!1,"function"==typeof e&&(t=e,e=1),this.cursorRows=e,"function"==typeof t)return this.cursorFn=t,this;let r;return{[Symbol.asyncIterator]:()=>({next:()=>{if(this.executed&&!this.active)return{done:!0};r&&r();let e=new Promise((e,t)=>{this.cursorFn=t=>(e({value:t,done:!1}),new Promise(e=>r=e)),this.resolve=()=>(this.active=!1,e({done:!0})),this.reject=e=>(this.active=!1,t(e))});return this.execute(),e},return:()=>(r&&r(CLOSE),{done:!0})})}}describe(){return this.options.simple=!1,this.onlyDescribe=this.options.prepare=!0,this}stream(){throw Error(".stream has been renamed to .forEach")}forEach(e){return this.forEachFn=e,this.handle(),this}raw(){return this.isRaw=!0,this}values(){return this.isRaw="values",this}async handle(){!this.executed&&(this.executed=!0)&&await 1&&this.handler(this)}execute(){return this.handle(),this}then(){return this.handle(),super.then.apply(this,arguments)}catch(){return this.handle(),super.catch.apply(this,arguments)}finally(){return this.handle(),super.finally.apply(this,arguments)}}var connection=function(e,t,r){let{host:n,port:i}=r||t,a=Object.assign(Error("write "+e+" "+(t.path||n+":"+i)),{code:e,errno:e,address:t.path||n},t.path?{}:{port:i});return Error.captureStackTrace(a,connection),a},postgres=function(e){let t=new PostgresError(e);return Error.captureStackTrace(t,postgres),t},generic=function(e,t){let r=Object.assign(Error(e+": "+t),{code:e});return Error.captureStackTrace(r,generic),r},notSupported=function(e){let t=Object.assign(Error(e+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED",name:e});return Error.captureStackTrace(t,notSupported),t};class PostgresError extends Error{constructor(e){super(e.message),this.name=this.constructor.name,Object.assign(this,e)}}var Errors={connection,postgres,generic,notSupported};function handleValue(e,t,r,n){let i=e instanceof Parameter?e.value:e;if(void 0===i&&(e instanceof Parameter?e.value=n.transform.undefined:i=e=n.transform.undefined,void 0===i))throw Errors.generic("UNDEFINED_VALUE","Undefined values are not allowed");return"$"+r.push(e instanceof Parameter?(t.push(e.value),e.array?e.array[e.type||inferType(e.value)]||e.type||firstIsString(e.value):e.type):(t.push(e),inferType(e)))}function stringify(e,t,r,n,i,a){for(let o=1;o<e.strings.length;o++)t+=stringifyValue(t,r,n,i,a)+e.strings[o],r=e.args[o];return t}var stringifyValue=function(e,t,r,n,i){return t instanceof Builder?t.build(e,r,n,i):t instanceof Query?fragment(t,r,n,i):t instanceof Identifier?t.value:t&&t[0]instanceof Query?t.reduce((e,t)=>e+" "+fragment(t,r,n,i),""):handleValue(t,r,n,i)},fragment=function(e,t,r,n){return e.fragment=!0,stringify(e,e.strings[0],e.args[0],t,r,n)},valuesBuilder=function(e,t,r,n,i){return e.map(e=>"("+n.map(n=>stringifyValue("values",e[n],t,r,i)).join(",")+")").join(",")},values=function(e,t,r,n,i){let a=Array.isArray(e[0]),o=t.length?t.flat():Object.keys(a?e[0]:e);return valuesBuilder(a?e:[e],r,n,o,i)},select=function(e,t,r,n,i){if("string"==typeof e&&(e=[e].concat(t)),Array.isArray(e))return escapeIdentifiers(e,i);let a,o=t.length?t.flat():Object.keys(e);return o.map(t=>((a=e[t])instanceof Query?fragment(a,r,n,i):a instanceof Identifier?a.value:handleValue(a,r,n,i))+" as "+escapeIdentifier(i.transform.column.to?i.transform.column.to(t):t)).join(",")},notTagged=function(){throw Errors.generic("NOT_TAGGED_CALL","Query not called as a tagged template literal")},firstIsString=function(e){return Array.isArray(e)?firstIsString(e[0]):"string"==typeof e?1009:0},typeHandlers=function(e){return Object.keys(e).reduce((t,r)=>(e[r].from&&[].concat(e[r].from).forEach(n=>t.parsers[n]=e[r].parse),e[r].serialize&&(t.serializers[e[r].to]=e[r].serialize,e[r].from&&[].concat(e[r].from).forEach(n=>t.serializers[n]=e[r].serialize)),t),{parsers:{},serializers:{}})},escapeIdentifiers=function(e,{transform:{column:t}}){return e.map(e=>escapeIdentifier(t.to?t.to(e):e)).join(",")},arrayEscape=function(e){return e.replace(escapeBackslash,"\\\\").replace(escapeQuote,'\\"')},arrayParserLoop=function(e,t,r,n){let i=[],a=1020===n?";":",";for(;e.i<t.length;e.i++){if(e.char=t[e.i],e.quoted)"\\"===e.char?e.str+=t[++e.i]:'"'===e.char?(i.push(r?r(e.str):e.str),e.str="",e.quoted='"'===t[e.i+1],e.last=e.i+2):e.str+=e.char;else if('"'===e.char)e.quoted=!0;else if("{"===e.char)e.last=++e.i,i.push(arrayParserLoop(e,t,r,n));else if("}"===e.char){e.quoted=!1,e.last<e.i&&i.push(r?r(t.slice(e.last,e.i)):t.slice(e.last,e.i)),e.last=e.i+1;break}else e.char===a&&"}"!==e.p&&'"'!==e.p&&(i.push(r?r(t.slice(e.last,e.i)):t.slice(e.last,e.i)),e.last=e.i+1);e.p=e.char}return e.last<e.i&&i.push(r?r(t.slice(e.last,e.i+1)):t.slice(e.last,e.i+1)),i},createJsonTransform=function(e){return function t(r,n){return"object"==typeof r&&null!==r&&(114===n.type||3802===n.type)?Array.isArray(r)?r.map(e=>t(e,n)):Object.entries(r).reduce((r,[i,a])=>Object.assign(r,{[e(i)]:t(a,n)}),{}):r}},types={string:{to:25,from:null,serialize:e=>""+e},number:{to:0,from:[21,23,26,700,701],serialize:e=>""+e,parse:e=>+e},json:{to:114,from:[114,3802],serialize:e=>JSON.stringify(e),parse:e=>JSON.parse(e)},boolean:{to:16,from:16,serialize:e=>!0===e?"t":"f",parse:e=>"t"===e},date:{to:1184,from:[1082,1114,1184],serialize:e=>(e instanceof Date?e:new Date(e)).toISOString(),parse:e=>new Date(e)},bytea:{to:17,from:17,serialize:e=>"\\x"+Buffer.from(e).toString("hex"),parse:e=>Buffer.from(e.slice(2),"hex")}};class NotTagged{then(){notTagged()}catch(){notTagged()}finally(){notTagged()}}class Identifier extends NotTagged{constructor(e){super(),this.value=escapeIdentifier(e)}}class Parameter extends NotTagged{constructor(e,t,r){super(),this.value=e,this.type=t,this.array=r}}class Builder extends NotTagged{constructor(e,t){super(),this.first=e,this.rest=t}build(e,t,r,n){let i=builders.map(([t,r])=>({fn:r,i:e.search(t)})).sort((e,t)=>e.i-t.i).pop();return -1===i.i?escapeIdentifiers(this.first,n):i.fn(this.first,this.rest,t,r,n)}}var defaultHandlers=typeHandlers(types),builders=Object.entries({values,in(...e){let t=values(...e);return"()"===t?"(null)":t},select,as:select,returning:select,"\\(":select,update:(e,t,r,n,i)=>(t.length?t.flat():Object.keys(e)).map(t=>escapeIdentifier(i.transform.column.to?i.transform.column.to(t):t)+"="+stringifyValue("values",e[t],r,n,i)),insert(e,t,r,n,i){let a=t.length?t.flat():Object.keys(Array.isArray(e)?e[0]:e);return"("+escapeIdentifiers(a,i)+")values"+valuesBuilder(Array.isArray(e)?e:[e],r,n,a,i)}}).map(([e,t])=>[RegExp("((?:^|[\\s(])"+e+"(?:$|[\\s(]))(?![\\s\\S]*\\1)","i"),t]),serializers=defaultHandlers.serializers,parsers=defaultHandlers.parsers,mergeUserTypes=function(e){let t=typeHandlers(e||{});return{serializers:Object.assign({},serializers,t.serializers),parsers:Object.assign({},parsers,t.parsers)}},escapeIdentifier=function e(t){return'"'+t.replace(/"/g,'""').replace(/\./g,'"."')+'"'},inferType=function e(t){return t instanceof Parameter?t.type:t instanceof Date?1184:t instanceof Uint8Array?17:!0===t||!1===t?16:"bigint"==typeof t?20:Array.isArray(t)?e(t[0]):0},escapeBackslash=/\\/g,escapeQuote=/"/g,arraySerializer=function e(t,r,n,i){if(!1===Array.isArray(t))return t;if(!t.length)return"{}";let a=t[0],o=1020===i?";":",";return Array.isArray(a)&&!a.type?"{"+t.map(t=>e(t,r,n,i)).join(o)+"}":"{"+t.map(e=>{if(void 0===e&&void 0===(e=n.transform.undefined))throw Errors.generic("UNDEFINED_VALUE","Undefined values are not allowed");return null===e?"null":'"'+arrayEscape(r?r(e.type?e.value:e):""+e)+'"'}).join(o)+"}"},arrayParserState={i:0,char:null,str:"",quoted:!1,last:0},arrayParser=function e(t,r,n){return arrayParserState.i=arrayParserState.last=0,arrayParserLoop(arrayParserState,t,r,n)},toCamel=e=>{let t=e[0];for(let r=1;r<e.length;r++)t+="_"===e[r]?e[++r].toUpperCase():e[r];return t},toPascal=e=>{let t=e[0].toUpperCase();for(let r=1;r<e.length;r++)t+="_"===e[r]?e[++r].toUpperCase():e[r];return t},toKebab=e=>e.replace(/_/g,"-"),fromCamel=e=>e.replace(/([A-Z])/g,"_$1").toLowerCase(),fromPascal=e=>(e.slice(0,1)+e.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),fromKebab=e=>e.replace(/-/g,"_");toCamel.column={from:toCamel},toCamel.value={from:createJsonTransform(toCamel)},fromCamel.column={to:fromCamel};var camel={...toCamel};camel.column.to=fromCamel,toPascal.column={from:toPascal},toPascal.value={from:createJsonTransform(toPascal)},fromPascal.column={to:fromPascal};var pascal={...toPascal};pascal.column.to=fromPascal,toKebab.column={from:toKebab},toKebab.value={from:createJsonTransform(toKebab)},fromKebab.column={to:fromKebab};var kebab={...toKebab};kebab.column.to=fromKebab;import r from"net";import n from"tls";import i from"crypto";import a from"stream";import{performance as o}from"perf_hooks";class Result extends Array{constructor(){super(),Object.defineProperties(this,{count:{value:null,writable:!0},state:{value:null,writable:!0},command:{value:null,writable:!0},columns:{value:null,writable:!0},statement:{value:null,writable:!0}})}static get[Symbol.species](){return Array}}var Queue=function(e=[]){let t=e.slice(),r=0;return{get length(){return t.length-r},remove(e){let r=t.indexOf(e);return -1===r?null:(t.splice(r,1),e)},push:e=>(t.push(e),e),shift(){let e=t[r++];return r===t.length?(r=0,t=[]):t[r-1]=void 0,e}}},queue_default=Queue,fit=function(e){if(buffer.length-b.i<e){let t=buffer,r=t.length;buffer=Buffer.allocUnsafe(r+(r>>1)+e),t.copy(buffer)}},reset=function(){return b.i=0,b},size=256,buffer=Buffer.allocUnsafe(size),messages="BCcDdEFfHPpQSX".split("").reduce((e,t)=>{let r=t.charCodeAt(0);return e[t]=()=>(buffer[0]=r,b.i=5,b),e},{}),b=Object.assign(reset,messages,{N:"\0",i:0,inc:e=>(b.i+=e,b),str(e){let t=Buffer.byteLength(e);return fit(t),b.i+=buffer.write(e,b.i,t,"utf8"),b},i16:e=>(fit(2),buffer.writeUInt16BE(e,b.i),b.i+=2,b),i32:(e,t)=>t||0===t?(buffer.writeUInt32BE(e,t),b):(fit(4),buffer.writeUInt32BE(e,b.i),b.i+=4,b),z:e=>(fit(e),buffer.fill(0,b.i,b.i+e),b.i+=e,b),raw:e=>(buffer=Buffer.concat([buffer.subarray(0,b.i),e]),b.i=buffer.length,b),end(e=1){buffer.writeUInt32BE(b.i-e,e);let t=buffer.subarray(0,b.i);return b.i=0,buffer=Buffer.allocUnsafe(size),t}}),bytes_default=b,Connection=function(e,t={},{onopen:u=noop,onend:s=noop,onclose:l=noop}={}){let{ssl:c,max:f,user:p,host:d,port:m,database:h,parsers:g,transform:$,onnotice:y,onnotify:v,onparameter:w,max_pipeline:_,keep_alive:S,backoff:R,target_session_attrs:A}=e,O=queue_default(),I=uid++,U={pid:null,secret:null},N=timer(eS,e.idle_timeout),P=timer(eS,e.max_lifetime),M=timer(function t(){ew(Errors.connection("CONNECT_TIMEOUT",e,C)),C.destroy()},e.connect_timeout),C=null,T,L=new Result,q=Buffer.alloc(0),x=e.fetch_types,F={},k={},B=Math.random().toString(36).slice(2),D=1,W=0,z=0,K=0,j=0,V=0,G=0,J=0,Q=null,H=null,Y=!1,X=null,Z=null,ee=null,et=null,er=null,en=null,ei=null,ea=null,eo=null,eu=null,es={queue:t.closed,idleTimer:N,connect(e){ee=e||!0,e8()},terminate:eR,execute:ef,cancel:ec,end:eS,count:0,id:I};return t.closed&&t.closed.push(es),es;async function el(){let t;try{t=e.socket?await Promise.resolve(e.socket(e)):new r.Socket}catch(n){eE(n);return}return t.on("error",eE),t.on("close",eA),t.on("drain",e$),t}async function ec({pid:e,secret:t},r,n){try{T=bytes_default().i32(16).i32(80877102).i32(e).i32(t).end(16),await ev(),C.once("error",n),C.once("close",r)}catch(i){n(i)}}function ef(t){if(Y)return e_(t,Errors.connection("CONNECTION_DESTROYED",e));if(!t.cancelled)try{return t.state=U,eo?O.push(t):(eo=t).active=!0,function t(r){let n=[],i=[],a=stringify(r,r.strings[0],r.args[0],n,i,e);r.tagged||r.args.forEach(t=>handleValue(t,n,i,e)),r.prepare=e.prepare&&(!("prepare"in r.options)||r.options.prepare),r.string=a,r.signature=r.prepare&&i+a,r.onlyDescribe&&delete k[r.signature],r.parameters=r.parameters||n,r.prepared=r.prepare&&r.signature in k,r.describeFirst=r.onlyDescribe||n.length&&!r.prepared,r.statement=r.prepared?k[r.signature]:{string:a,types:i,name:r.prepare?B+D++:""},"function"==typeof e.debug&&e.debug(I,a,n,i)}(t),em(function e(t){var r;if(t.parameters.length>=65534)throw Errors.generic("MAX_PARAMETERS_EXCEEDED","Max number of parameters (65534) exceeded");return t.options.simple?bytes_default().Q().str(t.statement.string+bytes_default.N).end():t.describeFirst?Buffer.concat([ep(t),Flush]):t.prepare?t.prepared?ed(t):Buffer.concat([ep(t),ed(t)]):(r=t,Buffer.concat([eX(r.statement.string,r.parameters,r.statement.types),DescribeUnnamed,ed(r)]))}(t))&&!t.describeFirst&&!t.cursorFn&&O.length<_&&(!t.options.onexecute||t.options.onexecute(es))}catch(r){return 0===O.length&&em(Sync),ew(r),!0}}function ep(e){return Buffer.concat([eX(e.statement.string,e.parameters,e.statement.types,e.statement.name),function e(t,r=""){return bytes_default().D().str("S").str(r+bytes_default.N).end()}("S",e.statement.name)])}function ed(t){return Buffer.concat([function t(r,n,i="",a=""){let o,u;return bytes_default().B().str(a+bytes_default.N).str(i+bytes_default.N).i16(0).i16(r.length),r.forEach((t,i)=>{if(null===t)return bytes_default.i32(4294967295);u=n[i],r[i]=t=u in e.serializers?e.serializers[u](t):""+t,o=bytes_default.i,bytes_default.inc(4).str(t).i32(bytes_default.i-o-4,o)}),bytes_default.i16(0),bytes_default.end()}(t.parameters,t.statement.types,t.statement.name,t.cursorName),t.cursorFn?eZ("",t.cursorRows):ExecuteUnnamed])}function em(e,t){return(en=en?Buffer.concat([en,e]):Buffer.from(e),t||en.length>=1024)?eh(t):(null===H&&(H=setImmediate(eh)),!0)}function eh(e){let t=C.write(en,e);return null!==H&&clearImmediate(H),en=H=null,t}async function eg(){em(SSLRequest);let e=await new Promise(e=>C.once("data",t=>e(83===t[0])));if(!e&&"prefer"===c)return eb();C.removeAllListeners(),(C=n.connect({socket:C,servername:r.isIP(C.host)?void 0:C.host,..."require"===c||"allow"===c||"prefer"===c?{rejectUnauthorized:!1}:"verify-full"===c?{}:"object"==typeof c?c:{}})).on("secureConnect",eb),C.on("error",eE),C.on("close",eA),C.on("drain",e$)}function e$(){eo||u(es)}function ey(e){if(!X||(X.push(e),!((z-=e.length)>=0)))for(q=X?Buffer.concat(X,V-z):0===q.length?e:Buffer.concat([q,e],q.length+e.length);q.length>4;){if((V=q.readUInt32BE(1))>=q.length){z=V-q.length,X=[q];break}try{eO(q.subarray(0,V+1))}catch(t){eo&&(eo.cursorFn||eo.describeFirst)&&em(Sync),ew(t)}q=q.subarray(V+1),z=0,X=null}}async function ev(){if(Y=!1,F={},C||(C=await el()),C){if(M.start(),e.socket)return c?eg():eb();if(C.on("connect",c?eg:eb),e.path)return C.connect(e.path);C.ssl=c,C.connect(m[K],d[K]),C.host=d[K],C.port=m[K],K=(K+1)%m.length}}function e8(){setTimeout(ev,W?W+G-o.now():0)}function eb(){try{k={},x=e.fetch_types,B=Math.random().toString(36).slice(2),D=1,P.start(),C.on("data",ey),S&&C.setKeepAlive&&C.setKeepAlive(!0,1e3*S);let t=T||bytes_default().inc(4).i16(3).z(2).str(Object.entries(Object.assign({user:p,database:h,client_encoding:"UTF8"},e.connection)).filter(([,e])=>e).map(([e,t])=>e+bytes_default.N+t).join(bytes_default.N)).z(2).end(0);em(t)}catch(r){eE(r)}}function eE(r){if(es.queue!==t.connecting||!e.host[j+1])for(ew(r);O.length;)e_(O.shift(),r)}function ew(e){er&&(er.destroy(e),er=null),eo&&e_(eo,e),ee&&(e_(ee,e),ee=null)}function e_(t,r){Object.defineProperties(r,{stack:{value:r.stack+t.origin.replace(/.*\n/,"\n"),enumerable:e.debug},query:{value:t.string,enumerable:e.debug},parameters:{value:t.parameters,enumerable:e.debug},args:{value:t.args,enumerable:e.debug},types:{value:t.statement&&t.statement.types,enumerable:e.debug}}),t.reject(r)}function eS(){return et||(es.reserved||s(es),es.reserved||ee||eo||0!==O.length?et=new Promise(e=>ei=e):(eR(),new Promise(e=>C&&"closed"!==C.readyState?C.once("close",e):e())))}function eR(){Y=!0,(er||eo||ee||O.length)&&eE(Errors.connection("CONNECTION_DESTROYED",e)),clearImmediate(H),C&&(C.removeListener("data",ey),C.removeListener("connect",eb),"open"===C.readyState&&C.end(bytes_default().X().end())),ei&&(ei(),et=ei=null)}async function eA(t){if(q=Buffer.alloc(0),z=0,X=null,clearImmediate(H),C.removeListener("data",ey),C.removeListener("connect",eb),N.cancel(),P.cancel(),M.cancel(),C.encrypted&&(C.removeAllListeners(),C=null),ee)return e8();!t&&(eo||O.length)&&eE(Errors.connection("CONNECTION_CLOSED",e,C)),W=o.now(),t&&e.shared.retries++,G=("function"==typeof R?R(e.shared.retries):R)*1e3,l(es,Errors.connection("CONNECTION_CLOSED",e,C))}function eO(e,t=e[0]){(68===t?eI:100===t?ej:65===t?eW:83===t?eU:90===t?eN:67===t?eP:50===t?e0:49===t?eM:116===t?eC:84===t?eT:82===t?eL:110===t?e4:75===t?e6:69===t?eD:115===t?ez:51===t?e3:71===t?eK:78===t?e7:72===t?e9:99===t?eV:73===t?eG:86===t?eJ:118===t?eQ:87===t?e5:eH)(e)}function eI(e){let t=7,r,n,i,a=eo.isRaw?Array(eo.statement.columns.length):{};for(let o=0;o<eo.statement.columns.length;o++)n=eo.statement.columns[o],r=e.readInt32BE(t),t+=4,i=-1===r?null:!0===eo.isRaw?e.subarray(t,t+=r):void 0===n.parser?e.toString("utf8",t,t+=r):!0===n.parser.array?n.parser(e.toString("utf8",t+1,t+=r)):n.parser(e.toString("utf8",t,t+=r)),eo.isRaw?a[o]=!0===eo.isRaw?i:$.value.from?$.value.from(i,n):i:a[n.name]=$.value.from?$.value.from(i,n):i;eo.forEachFn?eo.forEachFn($.row.from?$.row.from(a):a,L):L[J++]=$.row.from?$.row.from(a):a}function eU(t){let[r,n]=t.toString("utf8",5,t.length-1).split(bytes_default.N);F[r]=n,e.parameters[r]!==n&&(e.parameters[r]=n,w&&w(r,n))}function eN(t){if(eo&&eo.options.simple&&eo.resolve(Z||L),eo=Z=null,L=new Result,M.cancel(),ee){if(A){var r,n;if(!F.in_hot_standby||!F.default_transaction_read_only)return function e(){let t=new Query([`
      show transaction_read_only;
      select pg_catalog.pg_is_in_recovery()
    `],[],ef,null,{simple:!0});t.resolve=([[e],[t]])=>{F.default_transaction_read_only=e.transaction_read_only,F.in_hot_standby=t.pg_is_in_recovery?"on":"off"},t.execute()}();if(r=A,n=F,"read-write"===r&&"on"===n.default_transaction_read_only||"read-only"===r&&"off"===n.default_transaction_read_only||"primary"===r&&"on"===n.in_hot_standby||"standby"===r&&"off"===n.in_hot_standby||"prefer-standby"===r&&"off"===n.in_hot_standby&&e.host[j])return eR()}return x?(!0===ee&&(ee=null),e2()):(!0!==ee&&ef(ee),e.shared.retries=j=0,void(ee=null))}for(;O.length&&(eo=O.shift())&&(eo.active=!0,eo.cancelled);)Connection(e).cancel(eo.state,eo.cancelled.resolve,eo.cancelled.reject);eo||(es.reserved?es.reserved.release||73!==t[5]?es.reserved():et?eR():(es.reserved=null,u(es)):et?eR():u(es))}function eP(e){J=0;for(let t=e.length-1;t>0;t--)if(32===e[t]&&e[t+1]<58&&null===L.count&&(L.count=+e.toString("utf8",t+1,e.length-1)),e[t-1]>=65){L.command=e.toString("utf8",5,t),L.state=U;break}return(eu&&(eu(),eu=null),"BEGIN"!==L.command||1===f||es.reserved)?eo.options.simple?e0():void(eo.cursorFn&&(L.count&&eo.cursorFn(L),em(Sync)),eo.resolve(L)):ew(Errors.generic("UNSAFE_TRANSACTION","Only use sql.begin, sql.reserved or max: 1"))}function eM(){eo.parsing=!1}function e0(){L.statement||(L.statement=eo.statement),L.columns=eo.statement.columns}function eC(e){let t=e.readUInt16BE(5);for(let r=0;r<t;++r)eo.statement.types[r]||(eo.statement.types[r]=e.readUInt32BE(7+4*r));eo.prepare&&(k[eo.signature]=eo.statement),eo.describeFirst&&!eo.onlyDescribe&&(em(ed(eo)),eo.describeFirst=!1)}function eT(e){L.command&&((Z=Z||[L]).push(L=new Result),L.count=null,eo.statement.columns=null);let t=e.readUInt16BE(5),r=7,n;eo.statement.columns=Array(t);for(let i=0;i<t;++i){for(n=r;0!==e[r++];);let a=e.readUInt32BE(r),o=e.readUInt16BE(r+4),u=e.readUInt32BE(r+6);eo.statement.columns[i]={name:$.column.from?$.column.from(e.toString("utf8",n,r-1)):e.toString("utf8",n,r-1),parser:g[u],table:a,number:o,type:u},r+=18}if(L.statement=eo.statement,eo.onlyDescribe)return eo.resolve(eo.statement),em(Sync)}async function eL(e,t=e.readUInt32BE(5)){(3===t?eq:5===t?ex:10===t?eF:11===t?e1:12===t?ek:0!==t?eY:noop)(e,t)}async function eq(){let e=await eB();em(bytes_default().p().str(e).z(1).end())}async function ex(e){let t="md5"+await md5(Buffer.concat([Buffer.from(await md5(await eB()+p)),e.subarray(9)]));em(bytes_default().p().str(t).z(1).end())}async function eF(){ea=(await i.randomBytes(18)).toString("base64"),bytes_default().p().str("SCRAM-SHA-256"+bytes_default.N);let e=bytes_default.i;em(bytes_default.inc(4).str("n,,n=*,r="+ea).i32(bytes_default.i-e-4,e).end())}async function e1(e){let t=e.toString("utf8",9).split(",").reduce((e,t)=>(e[t[0]]=t.slice(2),e),{}),r=await i.pbkdf2Sync(await eB(),Buffer.from(t.s,"base64"),parseInt(t.i),32,"sha256"),n=await hmac(r,"Client Key"),a="n=*,r="+ea+",r="+t.r+",s="+t.s+",i="+t.i+",c=biws,r="+t.r;Q=(await hmac(await hmac(r,"Server Key"),a)).toString("base64");let o="c=biws,r="+t.r+",p="+xor(n,Buffer.from(await hmac(await sha256(n),a))).toString("base64");em(bytes_default().p().str(o).end())}function ek(e){e.toString("utf8",9).split(bytes_default.N,1)[0].slice(2)!==Q&&(ew(Errors.generic("SASL_SIGNATURE_MISMATCH","The server did not return the correct signature")),C.destroy())}function eB(){return Promise.resolve("function"==typeof e.pass?e.pass():e.pass)}function e4(){if(L.statement=eo.statement,L.statement.columns=[],eo.onlyDescribe)return eo.resolve(eo.statement),em(Sync)}function e6(e){U.pid=e.readUInt32BE(5),U.secret=e.readUInt32BE(9)}async function e2(){x=!1;let t=await new Query([`
      select b.oid, b.typarray
      from pg_catalog.pg_type a
      left join pg_catalog.pg_type b on b.oid = a.typelem
      where a.typcategory = 'A'
      group by b.oid, b.typarray
      order by b.oid
    `],[],ef);t.forEach(({oid:t,typarray:r})=>(function t(r,n){if(e.parsers[n]&&e.serializers[n])return;let i=e.parsers[r];e.shared.typeArrayMap[r]=n,e.parsers[n]=e=>arrayParser(e,i,n),e.parsers[n].array=!0,e.serializers[n]=t=>arraySerializer(t,e.serializers[r],e,n)})(t,r))}function eD(e){var t,r;eo&&(eo.cursorFn||eo.describeFirst)&&em(Sync);let n=Errors.postgres(parseError(e));eo&&eo.retried?ew(eo.retried):eo&&retryRoutines.has(n.routine)?(t=eo,r=n,delete k[t.signature],t.retried=r,ef(t)):ew(n)}function eW(e){if(!v)return;let t=9;for(;0!==e[t++];);v(e.toString("utf8",9,t-1),e.toString("utf8",t,e.length-1))}async function ez(){try{let e=await Promise.resolve(eo.cursorFn(L));J=0,e===CLOSE?em(function e(t=""){return Buffer.concat([bytes_default().C().str("P").str(t+bytes_default.N).end(),bytes_default().S().end()])}(eo.portal)):(L=new Result,em(eZ("",eo.cursorRows)))}catch(t){em(Sync),eo.reject(t)}}function e3(){L.count&&eo.cursorFn(L),eo.resolve(L)}function eK(){er=new a.Writable({autoDestroy:!0,write(e,t,r){C.write(bytes_default().d().raw(e).end(),r)},destroy(e,t){t(e),C.write(bytes_default().f().str(e+bytes_default.N).end()),er=null},final(e){C.write(bytes_default().c().end()),eu=e}}),eo.resolve(er)}function e9(){er=new a.Readable({read(){C.resume()}}),eo.resolve(er)}function e5(){er=new a.Duplex({autoDestroy:!0,read(){C.resume()},write(e,t,r){C.write(bytes_default().d().raw(e).end(),r)},destroy(e,t){t(e),C.write(bytes_default().f().str(e+bytes_default.N).end()),er=null},final(e){C.write(bytes_default().c().end()),eu=e}}),eo.resolve(er)}function ej(e){er&&(er.push(e.subarray(5))||C.pause())}function eV(){er&&er.push(null),er=null}function e7(e){y?y(parseError(e)):console.log(parseError(e))}function eG(){}function eJ(){ew(Errors.notSupported("FunctionCallResponse"))}function eQ(){ew(Errors.notSupported("NegotiateProtocolVersion"))}function eH(e){console.error("Postgres.js : Unknown Message:",e[0])}function eY(e,t){console.error("Postgres.js : Unknown Auth:",t)}function eX(e,t,r,n=""){return bytes_default().P().str(n+bytes_default.N).str(e+bytes_default.N).i16(t.length),t.forEach((e,t)=>bytes_default.i32(r[t]||0)),bytes_default.end()}function eZ(e="",t=0){return Buffer.concat([bytes_default().E().str(e+bytes_default.N).i32(t).end(),Flush])}},parseError=function(e){let t={},r=5;for(let n=5;n<e.length-1;n++)0===e[n]&&(t[errorFields[e[r]]]=e.toString("utf8",r+1,n),r=n+1);return t},md5=function(e){return i.createHash("md5").update(e).digest("hex")},hmac=function(e,t){return i.createHmac("sha256",e).update(t).digest()},sha256=function(e){return i.createHash("sha256").update(e).digest()},xor=function(e,t){let r=Math.max(e.length,t.length),n=Buffer.allocUnsafe(r);for(let i=0;i<r;i++)n[i]=e[i]^t[i];return n},timer=function(e,t){if(!(t="function"==typeof t?t():t))return{cancel:noop,start:noop};let r;return{cancel(){r&&(clearTimeout(r),r=null)},start(){r&&clearTimeout(r),r=setTimeout(n,1e3*t,arguments)}};function n(t){e.apply(null,t),r=null}},connection_default=Connection,uid=1,Sync=bytes_default().S().end(),Flush=bytes_default().H().end(),SSLRequest=bytes_default().i32(8).i32(80877103).end(8),ExecuteUnnamed=Buffer.concat([bytes_default().E().str(bytes_default.N).i32(0).end(),Sync]),DescribeUnnamed=bytes_default().D().str("S").str(bytes_default.N).end(),noop=()=>{},retryRoutines=new Set(["FetchPreparedStatement","RevalidateCachedQuery","transformAssignedExpr"]),errorFields={83:"severity_local",86:"severity",67:"code",77:"message",68:"detail",72:"hint",80:"position",112:"internal_position",113:"internal_query",87:"where",115:"schema_name",116:"table_name",99:"column_name",100:"data type_name",110:"constraint_name",70:"file",76:"line",82:"routine"},Time=function(e){return new Date(Date.UTC(2e3,0,1)+Number(e/BigInt(1e3)))},parse=function(e,t,r,n,i){let a=(e,[t,r])=>(e[t.charCodeAt(0)]=r,e);Object.entries({R(e){let n=1,a=t[e.readUInt32BE(n)]={schema:e.toString("utf8",n+=4,n=e.indexOf(0,n))||"pg_catalog",table:e.toString("utf8",n+1,n=e.indexOf(0,n+1)),columns:Array(e.readUInt16BE(n+=2)),keys:[]};n+=2;let o=0,u;for(;n<e.length;)(u=a.columns[o++]={key:e[n++],name:i.column.from?i.column.from(e.toString("utf8",n,n=e.indexOf(0,n))):e.toString("utf8",n,n=e.indexOf(0,n)),type:e.readUInt32BE(n+=1),parser:r[e.readUInt32BE(n)],atttypmod:e.readUInt32BE(n+=4)}).key&&a.keys.push(u),n+=4},Y(){},O(){},B(e){t.date=Time(e.readBigInt64BE(9)),t.lsn=e.subarray(1,9)},I(e){let r=1,a=t[e.readUInt32BE(r)],{row:o}=tuples(e,a.columns,r+=7,i);n(o,{command:"insert",relation:a})},D(e){let r=1,a=t[e.readUInt32BE(r)];r+=4;let o=75===e[r];n(o||79===e[r]?tuples(e,a.columns,r+=3,i).row:null,{command:"delete",relation:a,key:o})},U(e){let r=1,a=t[e.readUInt32BE(r)];r+=4;let o=75===e[r],u=o||79===e[r]?tuples(e,a.columns,r+=3,i):null;u&&(r=u.i);let{row:s}=tuples(e,a.columns,r+3,i);n(s,{command:"update",relation:a,key:o,old:u&&u.row})},T(){},C(){}}).reduce(a,{})[e[0]](e)},tuples=function(e,t,r,n){let i,a,o,u=n.raw?Array(t.length):{};for(let s=0;s<t.length;s++)i=e[r++],a=t[s],o=110===i?null:117===i?void 0:void 0===a.parser?e.toString("utf8",r+4,r+=4+e.readUInt32BE(r)):!0===a.parser.array?a.parser(e.toString("utf8",r+5,r+=4+e.readUInt32BE(r))):a.parser(e.toString("utf8",r+4,r+=4+e.readUInt32BE(r))),n.raw?u[s]=!0===n.raw?o:n.value.from?n.value.from(o,a):o:u[a.name]=n.value.from?n.value.from(o,a):o;return{i:r,row:n.row.from?n.row.from(u):u}},parseEvent=function(e){let t=e.match(/^(\*|insert|update|delete)?:?([^.]+?\.?[^=]+)?=?(.+)?/i)||[];if(!t)throw Error("Malformed subscribe pattern: "+e);let[,r,n,i]=t;return(r||"*")+(n?":"+(-1===n.indexOf(".")?"public."+n:n):"")+(i?"="+i:"")},noop2=()=>{};function Subscribe(e,t){let r=new Map,n="postgresjs_"+Math.random().toString(36).slice(2),i={},a,o,u=!1,s=f.sql=e({...t,transform:{column:{},value:{},row:{}},max:1,fetch_types:!1,idle_timeout:null,max_lifetime:null,connection:{...t.connection,replication:"database"},onclose:async function(){u||(o=null,i.pid=i.secret=void 0,p(await d(s,n,t.publications)),r.forEach(e=>e.forEach(({onsubscribe:e})=>e())))},no_subscribe:!0}),{end:l,close:c}=s;return s.end=async()=>(u=!0,o&&await new Promise(e=>(o.once("close",e),o.end())),l()),s.close=async()=>(o&&await new Promise(e=>(o.once("close",e),o.end())),c()),f;async function f(e,o,u=noop2){e=parseEvent(e),a||(a=d(s,n,t.publications));let l={fn:o,onsubscribe:u},c=r.has(e)?r.get(e).add(l):r.set(e,new Set([l])).get(e),f=()=>{c.delete(l),0===c.size&&r.delete(e)};return a.then(e=>(p(e),u(),{unsubscribe:f,state:i,sql:s}))}function p(e){o=e.stream,i.pid=e.state.pid,i.secret=e.state.secret}async function d(e,r,n){if(!n)throw Error("Missing publication names");let i=await e.unsafe(`CREATE_REPLICATION_SLOT ${r} TEMPORARY LOGICAL pgoutput NOEXPORT_SNAPSHOT`),[a]=i,o=await e.unsafe(`START_REPLICATION SLOT ${r} LOGICAL ${a.consistent_point} (proto_version '1', publication_names '${n}')`).writable(),u={lsn:Buffer.concat(a.consistent_point.split("/").map(e=>Buffer.from(("00000000"+e).slice(-8),"hex")))};return o.on("data",function r(n){119===n[0]?parse(n.subarray(25),u,e.options.parsers,s,t.transform):107===n[0]&&n[17]&&function e(){let t=Buffer.alloc(34);t[0]=114,t.fill(u.lsn,1),t.writeBigInt64BE(BigInt(Date.now()-Date.UTC(2e3,0,1))*BigInt(1e3),25),o.write(t)}()}),o.on("error",function e(t){console.error("Unexpected error during logical streaming - reconnecting",t)}),o.on("close",e.close),{stream:o,state:i.state};function s(e,t){let r=t.relation.schema+"."+t.relation.table;m("*",e,t),m("*:"+r,e,t),t.relation.keys.length&&m("*:"+r+"="+t.relation.keys.map(t=>e[t.name]),e,t),m(t.command,e,t),m(t.command+":"+r,e,t),t.relation.keys.length&&m(t.command+":"+r+"="+t.relation.keys.map(t=>e[t.name]),e,t)}}function m(e,t,n){r.has(e)&&r.get(e).forEach(({fn:r})=>r(t,n,e))}}import u from"stream";function largeObject(e,t,r=393216){return new Promise(async(n,i)=>{await e.begin(async e=>{let i;t||([{oid:t}]=await e`select lo_creat(-1) as oid`);let[{fd:a}]=await e`select lo_open(${t}, ${r}) as fd`,o={writable:l,readable:s,close:()=>e`select lo_close(${a})`.then(i),tell:()=>e`select lo_tell64(${a})`,read:t=>e`select loread(${a}, ${t}) as data`,write:t=>e`select lowrite(${a}, ${t})`,truncate:t=>e`select lo_truncate64(${a}, ${t})`,seek:(t,r=0)=>e`select lo_lseek64(${a}, ${t}, ${r})`,size:()=>e`
          select
            lo_lseek64(${a}, location, 0) as position,
            seek.size
          from (
            select
              lo_lseek64($1, 0, 2) as size,
              tell.location
            from (select lo_tell64($1) as location) tell
          ) seek
        `};return n(o),new Promise(async e=>i=e);async function s({highWaterMark:e=16384,start:t=0,end:r=1/0}={}){let n=r-t;return t&&await o.seek(t),new u.Readable({highWaterMark:e,async read(e){let t=e>n?e-n:e;n-=e;let[{data:r}]=await o.read(t);this.push(r),r.length<e&&this.push(null)}})}async function l({highWaterMark:e=16384,start:t=0}={}){return t&&await o.seek(t),new u.Writable({highWaterMark:e,write(e,t,r){o.write(e).then(()=>r(),r)}})}}).catch(i)})}var Postgres=function(e,r){let n=parseOptions(e,r),i=n.no_subscribe||Subscribe(Postgres,{...n}),a=!1,o=queue_default(),u=queue_default(),s=queue_default(),l=queue_default(),c=queue_default(),f=queue_default(),p=queue_default(),d=queue_default(),m={connecting:u,reserved:s,closed:l,ended:c,open:f,busy:p,full:d},h=[...Array(n.max)].map(()=>connection_default(n,m,{onopen:C,onend:M,onclose:T})),g=$(function e(t){return a?t.reject(Errors.connection("CONNECTION_ENDED",n,n)):f.length?A(f.shift(),t):l.length?P(l.shift(),t):void(p.length?A(p.shift(),t):o.push(t))});return Object.assign(g,{get parameters(){return n.parameters},largeObject:largeObject.bind(null,g),subscribe:i,CLOSE,END:CLOSE,PostgresError,options:n,reserve:w,listen:y,begin:_,close:U,end:I}),g;function $(e){return e.debug=n.debug,Object.entries(n.types).reduce((e,[t,r])=>(e[t]=e=>new Parameter(e,r.to),e),r),Object.assign(i,{types:r,typed:r,unsafe:function t(r,n=[],i={}){2!==arguments.length||Array.isArray(n)||(i=n,n=[]);let a=new Query([r],n,e,O,{prepare:!1,...i,simple:"simple"in i?i.simple:0===n.length});return a},notify:v,array:function e(t,r){return Array.isArray(t)?new Parameter(t,r||(t.length?inferType(t)||25:0),n.shared.typeArrayMap):e(Array.from(arguments))},json:R,file:function r(n,i=[],a={}){2!==arguments.length||Array.isArray(i)||(a=i,i=[]);let o=new Query([],i,r=>{t.readFile(n,"utf8",(t,n)=>{if(t)return r.reject(t);r.strings=[n],e(r)})},O,{...a,simple:"simple"in a?a.simple:0===i.length});return o}}),i;function r(e,t){return new Parameter(e,t)}function i(t,...r){let i=t&&Array.isArray(t.raw)?new Query(t,r,e,O):"string"!=typeof t||r.length?new Builder(t,r):new Identifier(n.transform.column.to?n.transform.column.to(t):t);return i}}async function y(e,t,r){let i={fn:t,onlisten:r},a=y.sql||(y.sql=Postgres({...n,max:1,idle_timeout:null,max_lifetime:null,fetch_types:!1,onclose(){Object.entries(y.channels).forEach(([e,{listeners:t}])=>{delete y.channels[e],Promise.all(t.map(t=>y(e,t.fn,t.onlisten).catch(()=>{})))})},onnotify(e,t){e in y.channels&&y.channels[e].listeners.forEach(e=>e.fn(t))}})),o=y.channels||(y.channels={}),u=e in o;if(u){o[e].listeners.push(i);let s=await o[e].result;return i.onlisten&&i.onlisten(),{state:s.state,unlisten:c}}o[e]={result:a`listen ${a.unsafe('"'+e.replace(/"/g,'""')+'"')}`,listeners:[i]};let l=await o[e].result;return i.onlisten&&i.onlisten(),{state:l.state,unlisten:c};async function c(){if(e in o!=!1&&(o[e].listeners=o[e].listeners.filter(e=>e!==i),!o[e].listeners.length))return delete o[e],a`unlisten ${a.unsafe('"'+e.replace(/"/g,'""')+'"')}`}}async function v(e,t){return await g`select pg_notify(${e}, ${""+t})`}async function w(){let e=queue_default(),t=f.length?f.shift():await new Promise(e=>{o.push({reserve:e}),l.length&&P(l.shift())});S(t,s),t.reserved=()=>e.length?t.execute(e.shift()):S(t,s),t.reserved.release=!0;let r=$(function r(n){t.queue===d?e.push(n):t.execute(n)||S(t,d)});return r.release=()=>{t.reserved=null,C(t)},r}async function _(e,t){t||(t=e,e="");let r=queue_default(),n=0,i,a=null;try{return await g.unsafe("begin "+e.replace(/[^a-z ]/ig,""),[],{onexecute:function e(t){i=t,S(t,s),t.reserved=()=>r.length?t.execute(r.shift()):S(t,s)}}).execute(),await Promise.race([u(i,t),new Promise((e,t)=>i.onclose=t)])}catch(o){throw o}async function u(e,t,i){let o=$(function t(n){n.catch(e=>s||(s=e)),e.queue===d?r.push(n):e.execute(n)||S(e,d)});o.savepoint=function t(r,i){return r&&Array.isArray(r.raw)?t(e=>e.apply(e,arguments)):(1===arguments.length&&(i=r,r=null),u(e,i,"s"+n+++(r?"_"+r:"")))},o.prepare=e=>a=e.replace(/[^a-z0-9$-_. ]/gi);let s,l;i&&await o`savepoint ${o(i)}`;try{if(l=await new Promise((e,r)=>{let n=t(o);Promise.resolve(Array.isArray(n)?Promise.all(n):n).then(e,r)}),s)throw s}catch(c){throw await (i?o`rollback to ${o(i)}`:o`rollback`),c instanceof PostgresError&&"25P02"===c.code&&s||c}return i||(a?await o`prepare transaction '${o.unsafe(a)}'`:await o`commit`),l}}function S(e,t){return e.queue.remove(e),t.push(e),e.queue=t,t===f?e.idleTimer.start():e.idleTimer.cancel(),e}function R(e){return new Parameter(e,3802)}function A(e,t){return e.execute(t)?S(e,p):S(e,d)}function O(e){return new Promise((t,r)=>{e.state?e.active?connection_default(n).cancel(e.state,t,r):e.cancelled={resolve:t,reject:r}:(o.remove(e),e.cancelled=!0,e.reject(Errors.generic("57014","canceling statement due to user request")),t())})}async function I({timeout:e=null}={}){if(a)return a;await 1;let t;return a=Promise.race([new Promise(r=>null!==e&&(t=setTimeout(N,1e3*e,r))),Promise.all(h.map(e=>e.end()).concat(y.sql?y.sql.end({timeout:0}):[],i.sql?i.sql.end({timeout:0}):[]))]).then(()=>clearTimeout(t))}async function U(){await Promise.all(h.map(e=>e.end()))}async function N(e){for(await Promise.all(h.map(e=>e.terminate()));o.length;)o.shift().reject(Errors.connection("CONNECTION_DESTROYED",n));e()}function P(e,t){return S(e,u),e.connect(t),e}function M(e){S(e,c)}function C(e){if(0===o.length)return S(e,f);let t=Math.ceil(o.length/(u.length+1)),r=!0;for(;r&&o.length&&t-- >0;){let n=o.shift();if(n.reserve)return n.reserve(e);r=e.execute(n)}r?S(e,p):S(e,d)}function T(e,t){S(e,l),e.reserved=null,e.onclose&&(e.onclose(t),e.onclose=null),n.onclose&&n.onclose(e.id),o.length&&P(e,o.shift())}},parseOptions=function(e,t){if(e&&e.shared)return e;let r=process.env,n=(e&&"string"!=typeof e?e:t)||{},{url:i,multihost:a}=parseUrl(e),o=[...i.searchParams].reduce((e,[t,r])=>(e[t]=r,e),{}),u=n.hostname||n.host||a||i.hostname||r.PGHOST||"localhost",s=n.port||i.port||r.PGPORT||5432,l=n.user||n.username||i.username||r.PGUSERNAME||r.PGUSER||osUsername();n.no_prepare&&(n.prepare=!1),o.sslmode&&(o.ssl=o.sslmode,delete o.sslmode),"timeout"in n&&(console.log("The timeout option is deprecated, use idle_timeout instead"),n.idle_timeout=n.timeout),"system"===o.sslrootcert&&(o.ssl="verify-full");let c=["idle_timeout","connect_timeout","max_lifetime","max_pipeline","backoff","keep_alive"],f={max:10,ssl:!1,idle_timeout:null,connect_timeout:30,max_lifetime,max_pipeline:100,backoff,keep_alive:60,prepare:!0,debug:!1,fetch_types:!0,publications:"alltables",target_session_attrs:null};return{host:Array.isArray(u)?u:u.split(",").map(e=>e.split(":")[0]),port:Array.isArray(s)?s:u.split(",").map(e=>parseInt(e.split(":")[1]||s)),path:n.path||u.indexOf("/")>-1&&u+"/.s.PGSQL."+s,database:n.database||n.db||(i.pathname||"").slice(1)||r.PGDATABASE||l,user:l,pass:n.pass||n.password||i.password||r.PGPASSWORD||"",...Object.entries(f).reduce((e,[t,i])=>{let a=t in n?n[t]:t in o?"disable"!==o[t]&&"false"!==o[t]&&o[t]:r["PG"+t.toUpperCase()]||i;return e[t]="string"==typeof a&&c.includes(t)?+a:a,e},{}),connection:{application_name:"postgres.js",...n.connection,...Object.entries(o).reduce((e,[t,r])=>(t in f||(e[t]=r),e),{})},types:n.types||{},target_session_attrs:tsa(n,i,r),onnotice:n.onnotice,onnotify:n.onnotify,onclose:n.onclose,onparameter:n.onparameter,socket:n.socket,transform:parseTransform(n.transform||{undefined:void 0}),parameters:{},shared:{retries:0,typeArrayMap:{}},...mergeUserTypes(n.types)}},tsa=function(e,t,r){let n=e.target_session_attrs||t.searchParams.get("target_session_attrs")||r.PGTARGETSESSIONATTRS;if(!n||["read-write","read-only","primary","standby","prefer-standby"].includes(n))return n;throw Error("target_session_attrs "+n+" is not supported")},backoff=function(e){return(.5+Math.random()/2)*Math.min(3**e/100,20)},max_lifetime=function(){return 60*(30+30*Math.random())},parseTransform=function(e){return{undefined:e.undefined,column:{from:"function"==typeof e.column?e.column:e.column&&e.column.from,to:e.column&&e.column.to},value:{from:"function"==typeof e.value?e.value:e.value&&e.value.from,to:e.value&&e.value.to},row:{from:"function"==typeof e.row?e.row:e.row&&e.row.from,to:e.row&&e.row.to}}},parseUrl=function(e){if(!e||"string"!=typeof e)return{url:{searchParams:new Map}};let t=e;t=decodeURIComponent((t=t.slice(t.indexOf("://")+3).split(/[?/]/)[0]).slice(t.indexOf("@")+1));let r=new URL(e.replace(t,t.split(",")[0]));return{url:{username:decodeURIComponent(r.username),password:decodeURIComponent(r.password),host:r.host,hostname:r.hostname,port:r.port,pathname:r.pathname,searchParams:r.searchParams},multihost:t.indexOf(",")>-1&&t}},osUsername=function(){try{return e.userInfo().username}catch(t){return process.env.USERNAME||process.env.USER||process.env.LOGNAME}};Object.assign(Postgres,{PostgresError,toPascal,pascal,toCamel,camel,toKebab,kebab,fromPascal,fromCamel,fromKebab,BigInt:{to:20,from:[20],parse:e=>BigInt(e),serialize:e=>e.toString()}});var src_default=Postgres,E2=__toESM(require_Either(),1),function2=__toESM(require_function(),1),data_type_dictionary={bigint:"bigint",bigserial:"bigint",bit:"string","bit varying":"string",boolean:"boolean",box:"string",bytea:"string",character:"string","character varying":"string",cidr:"string",circle:"string",date:"Date","double precision":"number",inet:"string",integer:"number",interval:"string",json:"object",jsonb:"object",line:"string",lseg:"string",macaddr:"string",macaddr8:"string",money:"",numeric:"number",path:"string",pg_lsn:"string",pg_snapshot:"string",point:"string",polygon:"string",real:"number",smallint:"number",smallserial:"number",serial:"number",text:"string",time:"",timestamp:"",tsquery:"string",tsvector:"string",txid_snapshot:"string",uuid:"string",xml:"string"},getArgvValue=(e,t)=>e[e.indexOf(t)+1],capitalizeFirstLetter=e=>e.charAt(0).toUpperCase()+e.slice(1),singularize=e=>{let t={ves:"fe",ies:"y",i:"us",zes:"ze",ses:"s",es:"e",s:""};return e.replace(RegExp(`(${Object.keys(t).join("|")})$`),e=>t[e])},E=__toESM(require_Either(),1),parse_db_connection_url=e=>{try{let t=new URL(e),r=t.hostname,n=parseInt(t.port),i=t.pathname.split("/")[1],a=t.username,o=t.password;return E.right({host:r,port:n,database:i,username:a,password:o})}catch(u){return E.left(Error(JSON.stringify(u)))}};import{writeFileSync as s}from"fs";var CONNECTION_STRING=getArgvValue(process.argv,"--database"),TABLE_NAME=getArgvValue(process.argv,"--table"),dbOptions=function2.pipe(CONNECTION_STRING,parse_db_connection_url,E2.fold(e=>{console.log("ERROR GENERATING DB_OPTIONS",e),process.exit(1)},e=>e)),sql=src_default(dbOptions),table_schema=await sql`
    SELECT column_name, data_type, is_nullable    
    FROM information_schema.columns
    WHERE table_name = ${TABLE_NAME}
    ORDER BY ordinal_position;
`,file_name=function2.pipe(TABLE_NAME,singularize)+".ts",interface_name=function2.pipe(TABLE_NAME,singularize,capitalizeFirstLetter),content=`export interface ${interface_name} {
${table_schema.map(({column_name:e,data_type:t})=>`	${e}: ${data_type_dictionary[t]};`).join("\n")}
}`;s(`./bindings/${file_name}`,content),console.log(`

  ${file_name} generated successfully.
`),process.exit(0);